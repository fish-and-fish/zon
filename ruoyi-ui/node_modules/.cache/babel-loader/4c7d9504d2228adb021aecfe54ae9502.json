{"remainingRequest":"/Users/linglong/Documents/code/RuoYi-Vue/ruoyi-ui/node_modules/babel-loader/lib/index.js!/Users/linglong/Documents/code/RuoYi-Vue/ruoyi-ui/node_modules/cache-loader/dist/cjs.js??ref--0-0!/Users/linglong/Documents/code/RuoYi-Vue/ruoyi-ui/node_modules/vue-loader/lib/index.js??vue-loader-options!/Users/linglong/Documents/code/RuoYi-Vue/ruoyi-ui/src/components/Editor/index.vue?vue&type=script&lang=js","dependencies":[{"path":"/Users/linglong/Documents/code/RuoYi-Vue/ruoyi-ui/src/components/Editor/index.vue","mtime":1754723515891},{"path":"/Users/linglong/Documents/code/RuoYi-Vue/ruoyi-ui/babel.config.js","mtime":1754723517095},{"path":"/Users/linglong/Documents/code/RuoYi-Vue/ruoyi-ui/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/linglong/Documents/code/RuoYi-Vue/ruoyi-ui/node_modules/babel-loader/lib/index.js","mtime":456789000000},{"path":"/Users/linglong/Documents/code/RuoYi-Vue/ruoyi-ui/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/linglong/Documents/code/RuoYi-Vue/ruoyi-ui/node_modules/vue-loader/lib/index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:InVzZSBzdHJpY3QiOwoKdmFyIF9pbnRlcm9wUmVxdWlyZURlZmF1bHQgPSByZXF1aXJlKCIvVXNlcnMvbGluZ2xvbmcvRG9jdW1lbnRzL2NvZGUvUnVvWWktVnVlL3J1b3lpLXVpL25vZGVfbW9kdWxlcy9AYmFiZWwvcnVudGltZS9oZWxwZXJzL2ludGVyb3BSZXF1aXJlRGVmYXVsdC5qcyIpLmRlZmF1bHQ7Ck9iamVjdC5kZWZpbmVQcm9wZXJ0eShleHBvcnRzLCAiX19lc01vZHVsZSIsIHsKICB2YWx1ZTogdHJ1ZQp9KTsKZXhwb3J0cy5kZWZhdWx0ID0gdm9pZCAwOwpyZXF1aXJlKCJjb3JlLWpzL21vZHVsZXMvZXMuYXJyYXkuY29uY2F0LmpzIik7CnJlcXVpcmUoImNvcmUtanMvbW9kdWxlcy9lcy5hcnJheS5pbmNsdWRlcy5qcyIpOwpyZXF1aXJlKCJjb3JlLWpzL21vZHVsZXMvZXMubnVtYmVyLmNvbnN0cnVjdG9yLmpzIik7CnZhciBfYXhpb3MgPSBfaW50ZXJvcFJlcXVpcmVEZWZhdWx0KHJlcXVpcmUoImF4aW9zIikpOwp2YXIgX3F1aWxsID0gX2ludGVyb3BSZXF1aXJlRGVmYXVsdChyZXF1aXJlKCJxdWlsbCIpKTsKcmVxdWlyZSgicXVpbGwvZGlzdC9xdWlsbC5jb3JlLmNzcyIpOwpyZXF1aXJlKCJxdWlsbC9kaXN0L3F1aWxsLnNub3cuY3NzIik7CnJlcXVpcmUoInF1aWxsL2Rpc3QvcXVpbGwuYnViYmxlLmNzcyIpOwp2YXIgX2F1dGggPSByZXF1aXJlKCJAL3V0aWxzL2F1dGgiKTsKLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KdmFyIF9kZWZhdWx0ID0gZXhwb3J0cy5kZWZhdWx0ID0gewogIG5hbWU6ICJFZGl0b3IiLAogIHByb3BzOiB7CiAgICAvKiDnvJbovpHlmajnmoTlhoXlrrkgKi8KICAgIHZhbHVlOiB7CiAgICAgIHR5cGU6IFN0cmluZywKICAgICAgZGVmYXVsdDogIiIKICAgIH0sCiAgICAvKiDpq5jluqYgKi8KICAgIGhlaWdodDogewogICAgICB0eXBlOiBOdW1iZXIsCiAgICAgIGRlZmF1bHQ6IG51bGwKICAgIH0sCiAgICAvKiDmnIDlsI/pq5jluqYgKi8KICAgIG1pbkhlaWdodDogewogICAgICB0eXBlOiBOdW1iZXIsCiAgICAgIGRlZmF1bHQ6IG51bGwKICAgIH0sCiAgICAvKiDlj6ror7sgKi8KICAgIHJlYWRPbmx5OiB7CiAgICAgIHR5cGU6IEJvb2xlYW4sCiAgICAgIGRlZmF1bHQ6IGZhbHNlCiAgICB9LAogICAgLyog5LiK5Lyg5paH5Lu25aSn5bCP6ZmQ5Yi2KE1CKSAqLwogICAgZmlsZVNpemU6IHsKICAgICAgdHlwZTogTnVtYmVyLAogICAgICBkZWZhdWx0OiA1CiAgICB9LAogICAgLyog57G75Z6L77yIYmFzZTY05qC85byP44CBdXJs5qC85byP77yJICovCiAgICB0eXBlOiB7CiAgICAgIHR5cGU6IFN0cmluZywKICAgICAgZGVmYXVsdDogInVybCIKICAgIH0KICB9LAogIGRhdGE6IGZ1bmN0aW9uIGRhdGEoKSB7CiAgICByZXR1cm4gewogICAgICB1cGxvYWRVcmw6IHByb2Nlc3MuZW52LlZVRV9BUFBfQkFTRV9BUEkgKyAiL2NvbW1vbi91cGxvYWQiLAogICAgICAvLyDkuIrkvKDnmoTlm77niYfmnI3liqHlmajlnLDlnYAKICAgICAgaGVhZGVyczogewogICAgICAgIEF1dGhvcml6YXRpb246ICJCZWFyZXIgIiArICgwLCBfYXV0aC5nZXRUb2tlbikoKQogICAgICB9LAogICAgICBRdWlsbDogbnVsbCwKICAgICAgY3VycmVudFZhbHVlOiAiIiwKICAgICAgb3B0aW9uczogewogICAgICAgIHRoZW1lOiAic25vdyIsCiAgICAgICAgYm91bmRzOiBkb2N1bWVudC5ib2R5LAogICAgICAgIGRlYnVnOiAid2FybiIsCiAgICAgICAgbW9kdWxlczogewogICAgICAgICAgLy8g5bel5YW35qCP6YWN572uCiAgICAgICAgICB0b29sYmFyOiBbWyJib2xkIiwgIml0YWxpYyIsICJ1bmRlcmxpbmUiLCAic3RyaWtlIl0sCiAgICAgICAgICAvLyDliqDnspcg5pac5L2TIOS4i+WIkue6vyDliKDpmaTnur8KICAgICAgICAgIFsiYmxvY2txdW90ZSIsICJjb2RlLWJsb2NrIl0sCiAgICAgICAgICAvLyDlvJXnlKggIOS7o+eggeWdlwogICAgICAgICAgW3sKICAgICAgICAgICAgbGlzdDogIm9yZGVyZWQiCiAgICAgICAgICB9LCB7CiAgICAgICAgICAgIGxpc3Q6ICJidWxsZXQiCiAgICAgICAgICB9XSwKICAgICAgICAgIC8vIOacieW6j+OAgeaXoOW6j+WIl+ihqAogICAgICAgICAgW3sKICAgICAgICAgICAgaW5kZW50OiAiLTEiCiAgICAgICAgICB9LCB7CiAgICAgICAgICAgIGluZGVudDogIisxIgogICAgICAgICAgfV0sCiAgICAgICAgICAvLyDnvKnov5sKICAgICAgICAgIFt7CiAgICAgICAgICAgIHNpemU6IFsic21hbGwiLCBmYWxzZSwgImxhcmdlIiwgImh1Z2UiXQogICAgICAgICAgfV0sCiAgICAgICAgICAvLyDlrZfkvZPlpKflsI8KICAgICAgICAgIFt7CiAgICAgICAgICAgIGhlYWRlcjogWzEsIDIsIDMsIDQsIDUsIDYsIGZhbHNlXQogICAgICAgICAgfV0sCiAgICAgICAgICAvLyDmoIfpopgKICAgICAgICAgIFt7CiAgICAgICAgICAgIGNvbG9yOiBbXQogICAgICAgICAgfSwgewogICAgICAgICAgICBiYWNrZ3JvdW5kOiBbXQogICAgICAgICAgfV0sCiAgICAgICAgICAvLyDlrZfkvZPpopzoibLjgIHlrZfkvZPog4zmma/popzoibIKICAgICAgICAgIFt7CiAgICAgICAgICAgIGFsaWduOiBbXQogICAgICAgICAgfV0sCiAgICAgICAgICAvLyDlr7npvZDmlrnlvI8KICAgICAgICAgIFsiY2xlYW4iXSwKICAgICAgICAgIC8vIOa4hemZpOaWh+acrOagvOW8jwogICAgICAgICAgWyJsaW5rIiwgImltYWdlIiwgInZpZGVvIl0gLy8g6ZO+5o6l44CB5Zu+54mH44CB6KeG6aKRCiAgICAgICAgICBdCiAgICAgICAgfSwKICAgICAgICBwbGFjZWhvbGRlcjogIuivt+i+k+WFpeWGheWuuSIsCiAgICAgICAgcmVhZE9ubHk6IHRoaXMucmVhZE9ubHkKICAgICAgfQogICAgfTsKICB9LAogIGNvbXB1dGVkOiB7CiAgICBzdHlsZXM6IGZ1bmN0aW9uIHN0eWxlcygpIHsKICAgICAgdmFyIHN0eWxlID0ge307CiAgICAgIGlmICh0aGlzLm1pbkhlaWdodCkgewogICAgICAgIHN0eWxlLm1pbkhlaWdodCA9ICIiLmNvbmNhdCh0aGlzLm1pbkhlaWdodCwgInB4Iik7CiAgICAgIH0KICAgICAgaWYgKHRoaXMuaGVpZ2h0KSB7CiAgICAgICAgc3R5bGUuaGVpZ2h0ID0gIiIuY29uY2F0KHRoaXMuaGVpZ2h0LCAicHgiKTsKICAgICAgfQogICAgICByZXR1cm4gc3R5bGU7CiAgICB9CiAgfSwKICB3YXRjaDogewogICAgdmFsdWU6IHsKICAgICAgaGFuZGxlcjogZnVuY3Rpb24gaGFuZGxlcih2YWwpIHsKICAgICAgICBpZiAodmFsICE9PSB0aGlzLmN1cnJlbnRWYWx1ZSkgewogICAgICAgICAgdGhpcy5jdXJyZW50VmFsdWUgPSB2YWwgPT09IG51bGwgPyAiIiA6IHZhbDsKICAgICAgICAgIGlmICh0aGlzLlF1aWxsKSB7CiAgICAgICAgICAgIHRoaXMuUXVpbGwuY2xpcGJvYXJkLmRhbmdlcm91c2x5UGFzdGVIVE1MKHRoaXMuY3VycmVudFZhbHVlKTsKICAgICAgICAgIH0KICAgICAgICB9CiAgICAgIH0sCiAgICAgIGltbWVkaWF0ZTogdHJ1ZQogICAgfQogIH0sCiAgbW91bnRlZDogZnVuY3Rpb24gbW91bnRlZCgpIHsKICAgIHRoaXMuaW5pdCgpOwogIH0sCiAgYmVmb3JlRGVzdHJveTogZnVuY3Rpb24gYmVmb3JlRGVzdHJveSgpIHsKICAgIHRoaXMuUXVpbGwgPSBudWxsOwogIH0sCiAgbWV0aG9kczogewogICAgaW5pdDogZnVuY3Rpb24gaW5pdCgpIHsKICAgICAgdmFyIF90aGlzID0gdGhpczsKICAgICAgdmFyIGVkaXRvciA9IHRoaXMuJHJlZnMuZWRpdG9yOwogICAgICB0aGlzLlF1aWxsID0gbmV3IF9xdWlsbC5kZWZhdWx0KGVkaXRvciwgdGhpcy5vcHRpb25zKTsKICAgICAgLy8g5aaC5p6c6K6+572u5LqG5LiK5Lyg5Zyw5Z2A5YiZ6Ieq5a6a5LmJ5Zu+54mH5LiK5Lyg5LqL5Lu2CiAgICAgIGlmICh0aGlzLnR5cGUgPT0gJ3VybCcpIHsKICAgICAgICB2YXIgdG9vbGJhciA9IHRoaXMuUXVpbGwuZ2V0TW9kdWxlKCJ0b29sYmFyIik7CiAgICAgICAgdG9vbGJhci5hZGRIYW5kbGVyKCJpbWFnZSIsIGZ1bmN0aW9uICh2YWx1ZSkgewogICAgICAgICAgaWYgKHZhbHVlKSB7CiAgICAgICAgICAgIF90aGlzLiRyZWZzLnVwbG9hZC4kY2hpbGRyZW5bMF0uJHJlZnMuaW5wdXQuY2xpY2soKTsKICAgICAgICAgIH0gZWxzZSB7CiAgICAgICAgICAgIF90aGlzLnF1aWxsLmZvcm1hdCgiaW1hZ2UiLCBmYWxzZSk7CiAgICAgICAgICB9CiAgICAgICAgfSk7CiAgICAgICAgdGhpcy5RdWlsbC5yb290LmFkZEV2ZW50TGlzdGVuZXIoJ3Bhc3RlJywgdGhpcy5oYW5kbGVQYXN0ZUNhcHR1cmUsIHRydWUpOwogICAgICB9CiAgICAgIHRoaXMuUXVpbGwuY2xpcGJvYXJkLmRhbmdlcm91c2x5UGFzdGVIVE1MKHRoaXMuY3VycmVudFZhbHVlKTsKICAgICAgdGhpcy5RdWlsbC5vbigidGV4dC1jaGFuZ2UiLCBmdW5jdGlvbiAoZGVsdGEsIG9sZERlbHRhLCBzb3VyY2UpIHsKICAgICAgICB2YXIgaHRtbCA9IF90aGlzLiRyZWZzLmVkaXRvci5jaGlsZHJlblswXS5pbm5lckhUTUw7CiAgICAgICAgdmFyIHRleHQgPSBfdGhpcy5RdWlsbC5nZXRUZXh0KCk7CiAgICAgICAgdmFyIHF1aWxsID0gX3RoaXMuUXVpbGw7CiAgICAgICAgX3RoaXMuY3VycmVudFZhbHVlID0gaHRtbDsKICAgICAgICBfdGhpcy4kZW1pdCgiaW5wdXQiLCBodG1sKTsKICAgICAgICBfdGhpcy4kZW1pdCgib24tY2hhbmdlIiwgewogICAgICAgICAgaHRtbDogaHRtbCwKICAgICAgICAgIHRleHQ6IHRleHQsCiAgICAgICAgICBxdWlsbDogcXVpbGwKICAgICAgICB9KTsKICAgICAgfSk7CiAgICAgIHRoaXMuUXVpbGwub24oInRleHQtY2hhbmdlIiwgZnVuY3Rpb24gKGRlbHRhLCBvbGREZWx0YSwgc291cmNlKSB7CiAgICAgICAgX3RoaXMuJGVtaXQoIm9uLXRleHQtY2hhbmdlIiwgZGVsdGEsIG9sZERlbHRhLCBzb3VyY2UpOwogICAgICB9KTsKICAgICAgdGhpcy5RdWlsbC5vbigic2VsZWN0aW9uLWNoYW5nZSIsIGZ1bmN0aW9uIChyYW5nZSwgb2xkUmFuZ2UsIHNvdXJjZSkgewogICAgICAgIF90aGlzLiRlbWl0KCJvbi1zZWxlY3Rpb24tY2hhbmdlIiwgcmFuZ2UsIG9sZFJhbmdlLCBzb3VyY2UpOwogICAgICB9KTsKICAgICAgdGhpcy5RdWlsbC5vbigiZWRpdG9yLWNoYW5nZSIsIGZ1bmN0aW9uIChldmVudE5hbWUpIHsKICAgICAgICBmb3IgKHZhciBfbGVuID0gYXJndW1lbnRzLmxlbmd0aCwgYXJncyA9IG5ldyBBcnJheShfbGVuID4gMSA/IF9sZW4gLSAxIDogMCksIF9rZXkgPSAxOyBfa2V5IDwgX2xlbjsgX2tleSsrKSB7CiAgICAgICAgICBhcmdzW19rZXkgLSAxXSA9IGFyZ3VtZW50c1tfa2V5XTsKICAgICAgICB9CiAgICAgICAgX3RoaXMuJGVtaXQuYXBwbHkoX3RoaXMsIFsib24tZWRpdG9yLWNoYW5nZSIsIGV2ZW50TmFtZV0uY29uY2F0KGFyZ3MpKTsKICAgICAgfSk7CiAgICB9LAogICAgLy8g5LiK5Lyg5YmN5qCh5qOA5qC85byP5ZKM5aSn5bCPCiAgICBoYW5kbGVCZWZvcmVVcGxvYWQ6IGZ1bmN0aW9uIGhhbmRsZUJlZm9yZVVwbG9hZChmaWxlKSB7CiAgICAgIHZhciB0eXBlID0gWyJpbWFnZS9qcGVnIiwgImltYWdlL2pwZyIsICJpbWFnZS9wbmciLCAiaW1hZ2Uvc3ZnIl07CiAgICAgIHZhciBpc0pQRyA9IHR5cGUuaW5jbHVkZXMoZmlsZS50eXBlKTsKICAgICAgLy8g5qOA6aqM5paH5Lu25qC85byPCiAgICAgIGlmICghaXNKUEcpIHsKICAgICAgICB0aGlzLiRtZXNzYWdlLmVycm9yKCJcdTU2RkVcdTcyNDdcdTY4M0NcdTVGMEZcdTk1MTlcdThCRUYhIik7CiAgICAgICAgcmV0dXJuIGZhbHNlOwogICAgICB9CiAgICAgIC8vIOagoeajgOaWh+S7tuWkp+WwjwogICAgICBpZiAodGhpcy5maWxlU2l6ZSkgewogICAgICAgIHZhciBpc0x0ID0gZmlsZS5zaXplIC8gMTAyNCAvIDEwMjQgPCB0aGlzLmZpbGVTaXplOwogICAgICAgIGlmICghaXNMdCkgewogICAgICAgICAgdGhpcy4kbWVzc2FnZS5lcnJvcigiXHU0RTBBXHU0RjIwXHU2NTg3XHU0RUY2XHU1OTI3XHU1QzBGXHU0RTBEXHU4MEZEXHU4RDg1XHU4RkM3ICIuY29uY2F0KHRoaXMuZmlsZVNpemUsICIgTUIhIikpOwogICAgICAgICAgcmV0dXJuIGZhbHNlOwogICAgICAgIH0KICAgICAgfQogICAgICByZXR1cm4gdHJ1ZTsKICAgIH0sCiAgICBoYW5kbGVVcGxvYWRTdWNjZXNzOiBmdW5jdGlvbiBoYW5kbGVVcGxvYWRTdWNjZXNzKHJlcywgZmlsZSkgewogICAgICAvLyDlpoLmnpzkuIrkvKDmiJDlip8KICAgICAgaWYgKHJlcy5jb2RlID09IDIwMCkgewogICAgICAgIC8vIOiOt+WPluWvjOaWh+acrOe7hOS7tuWunuS+iwogICAgICAgIHZhciBxdWlsbCA9IHRoaXMuUXVpbGw7CiAgICAgICAgLy8g6I635Y+W5YWJ5qCH5omA5Zyo5L2N572uCiAgICAgICAgdmFyIGxlbmd0aCA9IHF1aWxsLmdldFNlbGVjdGlvbigpLmluZGV4OwogICAgICAgIC8vIOaPkuWFpeWbvueJhyAgcmVzLnVybOS4uuacjeWKoeWZqOi/lOWbnueahOWbvueJh+WcsOWdgAogICAgICAgIHF1aWxsLmluc2VydEVtYmVkKGxlbmd0aCwgImltYWdlIiwgcHJvY2Vzcy5lbnYuVlVFX0FQUF9CQVNFX0FQSSArIHJlcy5maWxlTmFtZSk7CiAgICAgICAgLy8g6LCD5pW05YWJ5qCH5Yiw5pyA5ZCOCiAgICAgICAgcXVpbGwuc2V0U2VsZWN0aW9uKGxlbmd0aCArIDEpOwogICAgICB9IGVsc2UgewogICAgICAgIHRoaXMuJG1lc3NhZ2UuZXJyb3IoIuWbvueJh+aPkuWFpeWksei0pSIpOwogICAgICB9CiAgICB9LAogICAgaGFuZGxlVXBsb2FkRXJyb3I6IGZ1bmN0aW9uIGhhbmRsZVVwbG9hZEVycm9yKCkgewogICAgICB0aGlzLiRtZXNzYWdlLmVycm9yKCLlm77niYfmj5LlhaXlpLHotKUiKTsKICAgIH0sCiAgICAvLyDlpI3liLbnspjotLTlm77niYflpITnkIYKICAgIGhhbmRsZVBhc3RlQ2FwdHVyZTogZnVuY3Rpb24gaGFuZGxlUGFzdGVDYXB0dXJlKGUpIHsKICAgICAgdmFyIGNsaXBib2FyZCA9IGUuY2xpcGJvYXJkRGF0YSB8fCB3aW5kb3cuY2xpcGJvYXJkRGF0YTsKICAgICAgaWYgKGNsaXBib2FyZCAmJiBjbGlwYm9hcmQuaXRlbXMpIHsKICAgICAgICBmb3IgKHZhciBpID0gMDsgaSA8IGNsaXBib2FyZC5pdGVtcy5sZW5ndGg7IGkrKykgewogICAgICAgICAgdmFyIGl0ZW0gPSBjbGlwYm9hcmQuaXRlbXNbaV07CiAgICAgICAgICBpZiAoaXRlbS50eXBlLmluZGV4T2YoJ2ltYWdlJykgIT09IC0xKSB7CiAgICAgICAgICAgIGUucHJldmVudERlZmF1bHQoKTsKICAgICAgICAgICAgdmFyIGZpbGUgPSBpdGVtLmdldEFzRmlsZSgpOwogICAgICAgICAgICB0aGlzLmluc2VydEltYWdlKGZpbGUpOwogICAgICAgICAgfQogICAgICAgIH0KICAgICAgfQogICAgfSwKICAgIGluc2VydEltYWdlOiBmdW5jdGlvbiBpbnNlcnRJbWFnZShmaWxlKSB7CiAgICAgIHZhciBfdGhpczIgPSB0aGlzOwogICAgICB2YXIgZm9ybURhdGEgPSBuZXcgRm9ybURhdGEoKTsKICAgICAgZm9ybURhdGEuYXBwZW5kKCJmaWxlIiwgZmlsZSk7CiAgICAgIF9heGlvcy5kZWZhdWx0LnBvc3QodGhpcy51cGxvYWRVcmwsIGZvcm1EYXRhLCB7CiAgICAgICAgaGVhZGVyczogewogICAgICAgICAgIkNvbnRlbnQtVHlwZSI6ICJtdWx0aXBhcnQvZm9ybS1kYXRhIiwKICAgICAgICAgIEF1dGhvcml6YXRpb246IHRoaXMuaGVhZGVycy5BdXRob3JpemF0aW9uCiAgICAgICAgfQogICAgICB9KS50aGVuKGZ1bmN0aW9uIChyZXMpIHsKICAgICAgICBfdGhpczIuaGFuZGxlVXBsb2FkU3VjY2VzcyhyZXMuZGF0YSk7CiAgICAgIH0pOwogICAgfQogIH0KfTs="},{"version":3,"names":["_axios","_interopRequireDefault","require","_quill","_auth","name","props","value","type","String","default","height","Number","minHeight","readOnly","Boolean","fileSize","data","uploadUrl","process","env","VUE_APP_BASE_API","headers","Authorization","getToken","Quill","currentValue","options","theme","bounds","document","body","debug","modules","toolbar","list","indent","size","header","color","background","align","placeholder","computed","styles","style","concat","watch","handler","val","clipboard","dangerouslyPasteHTML","immediate","mounted","init","beforeDestroy","methods","_this","editor","$refs","getModule","addHandler","upload","$children","input","click","quill","format","root","addEventListener","handlePasteCapture","on","delta","oldDelta","source","html","children","innerHTML","text","getText","$emit","range","oldRange","eventName","_len","arguments","length","args","Array","_key","apply","handleBeforeUpload","file","isJPG","includes","$message","error","isLt","handleUploadSuccess","res","code","getSelection","index","insertEmbed","fileName","setSelection","handleUploadError","e","clipboardData","window","items","i","item","indexOf","preventDefault","getAsFile","insertImage","_this2","formData","FormData","append","axios","post","then"],"sources":["src/components/Editor/index.vue"],"sourcesContent":["<template>\n  <div>\n    <el-upload\n      :action=\"uploadUrl\"\n      :before-upload=\"handleBeforeUpload\"\n      :on-success=\"handleUploadSuccess\"\n      :on-error=\"handleUploadError\"\n      name=\"file\"\n      :show-file-list=\"false\"\n      :headers=\"headers\"\n      style=\"display: none\"\n      ref=\"upload\"\n      v-if=\"this.type == 'url'\"\n    >\n    </el-upload>\n    <div class=\"editor\" ref=\"editor\" :style=\"styles\"></div>\n  </div>\n</template>\n\n<script>\nimport axios from \"axios\"\nimport Quill from \"quill\"\nimport \"quill/dist/quill.core.css\"\nimport \"quill/dist/quill.snow.css\"\nimport \"quill/dist/quill.bubble.css\"\nimport { getToken } from \"@/utils/auth\"\n\nexport default {\n  name: \"Editor\",\n  props: {\n    /* 编辑器的内容 */\n    value: {\n      type: String,\n      default: \"\",\n    },\n    /* 高度 */\n    height: {\n      type: Number,\n      default: null,\n    },\n    /* 最小高度 */\n    minHeight: {\n      type: Number,\n      default: null,\n    },\n    /* 只读 */\n    readOnly: {\n      type: Boolean,\n      default: false,\n    },\n    /* 上传文件大小限制(MB) */\n    fileSize: {\n      type: Number,\n      default: 5,\n    },\n    /* 类型（base64格式、url格式） */\n    type: {\n      type: String,\n      default: \"url\",\n    }\n  },\n  data() {\n    return {\n      uploadUrl: process.env.VUE_APP_BASE_API + \"/common/upload\", // 上传的图片服务器地址\n      headers: {\n        Authorization: \"Bearer \" + getToken()\n      },\n      Quill: null,\n      currentValue: \"\",\n      options: {\n        theme: \"snow\",\n        bounds: document.body,\n        debug: \"warn\",\n        modules: {\n          // 工具栏配置\n          toolbar: [\n            [\"bold\", \"italic\", \"underline\", \"strike\"],       // 加粗 斜体 下划线 删除线\n            [\"blockquote\", \"code-block\"],                    // 引用  代码块\n            [{ list: \"ordered\" }, { list: \"bullet\" }],       // 有序、无序列表\n            [{ indent: \"-1\" }, { indent: \"+1\" }],            // 缩进\n            [{ size: [\"small\", false, \"large\", \"huge\"] }],   // 字体大小\n            [{ header: [1, 2, 3, 4, 5, 6, false] }],         // 标题\n            [{ color: [] }, { background: [] }],             // 字体颜色、字体背景颜色\n            [{ align: [] }],                                 // 对齐方式\n            [\"clean\"],                                       // 清除文本格式\n            [\"link\", \"image\", \"video\"]                       // 链接、图片、视频\n          ],\n        },\n        placeholder: \"请输入内容\",\n        readOnly: this.readOnly,\n      },\n    }\n  },\n  computed: {\n    styles() {\n      let style = {}\n      if (this.minHeight) {\n        style.minHeight = `${this.minHeight}px`\n      }\n      if (this.height) {\n        style.height = `${this.height}px`\n      }\n      return style\n    }\n  },\n  watch: {\n    value: {\n      handler(val) {\n        if (val !== this.currentValue) {\n          this.currentValue = val === null ? \"\" : val\n          if (this.Quill) {\n            this.Quill.clipboard.dangerouslyPasteHTML(this.currentValue)\n          }\n        }\n      },\n      immediate: true,\n    },\n  },\n  mounted() {\n    this.init()\n  },\n  beforeDestroy() {\n    this.Quill = null\n  },\n  methods: {\n    init() {\n      const editor = this.$refs.editor\n      this.Quill = new Quill(editor, this.options)\n      // 如果设置了上传地址则自定义图片上传事件\n      if (this.type == 'url') {\n        let toolbar = this.Quill.getModule(\"toolbar\")\n        toolbar.addHandler(\"image\", (value) => {\n          if (value) {\n            this.$refs.upload.$children[0].$refs.input.click()\n          } else {\n            this.quill.format(\"image\", false)\n          }\n        })\n        this.Quill.root.addEventListener('paste', this.handlePasteCapture, true)\n      }\n      this.Quill.clipboard.dangerouslyPasteHTML(this.currentValue)\n      this.Quill.on(\"text-change\", (delta, oldDelta, source) => {\n        const html = this.$refs.editor.children[0].innerHTML\n        const text = this.Quill.getText()\n        const quill = this.Quill\n        this.currentValue = html\n        this.$emit(\"input\", html)\n        this.$emit(\"on-change\", { html, text, quill })\n      })\n      this.Quill.on(\"text-change\", (delta, oldDelta, source) => {\n        this.$emit(\"on-text-change\", delta, oldDelta, source)\n      })\n      this.Quill.on(\"selection-change\", (range, oldRange, source) => {\n        this.$emit(\"on-selection-change\", range, oldRange, source)\n      })\n      this.Quill.on(\"editor-change\", (eventName, ...args) => {\n        this.$emit(\"on-editor-change\", eventName, ...args)\n      })\n    },\n    // 上传前校检格式和大小\n    handleBeforeUpload(file) {\n      const type = [\"image/jpeg\", \"image/jpg\", \"image/png\", \"image/svg\"]\n      const isJPG = type.includes(file.type)\n      // 检验文件格式\n      if (!isJPG) {\n        this.$message.error(`图片格式错误!`)\n        return false\n      }\n      // 校检文件大小\n      if (this.fileSize) {\n        const isLt = file.size / 1024 / 1024 < this.fileSize\n        if (!isLt) {\n          this.$message.error(`上传文件大小不能超过 ${this.fileSize} MB!`)\n          return false\n        }\n      }\n      return true\n    },\n    handleUploadSuccess(res, file) {\n      // 如果上传成功\n      if (res.code == 200) {\n        // 获取富文本组件实例\n        let quill = this.Quill\n        // 获取光标所在位置\n        let length = quill.getSelection().index\n        // 插入图片  res.url为服务器返回的图片地址\n        quill.insertEmbed(length, \"image\", process.env.VUE_APP_BASE_API + res.fileName)\n        // 调整光标到最后\n        quill.setSelection(length + 1)\n      } else {\n        this.$message.error(\"图片插入失败\")\n      }\n    },\n    handleUploadError() {\n      this.$message.error(\"图片插入失败\")\n    },\n    // 复制粘贴图片处理\n    handlePasteCapture(e) {\n      const clipboard = e.clipboardData || window.clipboardData\n      if (clipboard && clipboard.items) {\n        for (let i = 0; i < clipboard.items.length; i++) {\n          const item = clipboard.items[i]\n          if (item.type.indexOf('image') !== -1) {\n            e.preventDefault()\n            const file = item.getAsFile()\n            this.insertImage(file)\n          }\n        }\n      }\n    },\n    insertImage(file) {\n      const formData = new FormData()\n      formData.append(\"file\", file)\n      axios.post(this.uploadUrl, formData, { headers: { \"Content-Type\": \"multipart/form-data\", Authorization: this.headers.Authorization } }).then(res => {\n        this.handleUploadSuccess(res.data)\n      })\n    }\n  }\n}\n</script>\n\n<style>\n.editor, .ql-toolbar {\n  white-space: pre-wrap !important;\n  line-height: normal !important;\n}\n.quill-img {\n  display: none;\n}\n.ql-snow .ql-tooltip[data-mode=\"link\"]::before {\n  content: \"请输入链接地址:\";\n}\n.ql-snow .ql-tooltip.ql-editing a.ql-action::after {\n  border-right: 0px;\n  content: \"保存\";\n  padding-right: 0px;\n}\n.ql-snow .ql-tooltip[data-mode=\"video\"]::before {\n  content: \"请输入视频地址:\";\n}\n.ql-snow .ql-picker.ql-size .ql-picker-label::before,\n.ql-snow .ql-picker.ql-size .ql-picker-item::before {\n  content: \"14px\";\n}\n.ql-snow .ql-picker.ql-size .ql-picker-label[data-value=\"small\"]::before,\n.ql-snow .ql-picker.ql-size .ql-picker-item[data-value=\"small\"]::before {\n  content: \"10px\";\n}\n.ql-snow .ql-picker.ql-size .ql-picker-label[data-value=\"large\"]::before,\n.ql-snow .ql-picker.ql-size .ql-picker-item[data-value=\"large\"]::before {\n  content: \"18px\";\n}\n.ql-snow .ql-picker.ql-size .ql-picker-label[data-value=\"huge\"]::before,\n.ql-snow .ql-picker.ql-size .ql-picker-item[data-value=\"huge\"]::before {\n  content: \"32px\";\n}\n.ql-snow .ql-picker.ql-header .ql-picker-label::before,\n.ql-snow .ql-picker.ql-header .ql-picker-item::before {\n  content: \"文本\";\n}\n.ql-snow .ql-picker.ql-header .ql-picker-label[data-value=\"1\"]::before,\n.ql-snow .ql-picker.ql-header .ql-picker-item[data-value=\"1\"]::before {\n  content: \"标题1\";\n}\n.ql-snow .ql-picker.ql-header .ql-picker-label[data-value=\"2\"]::before,\n.ql-snow .ql-picker.ql-header .ql-picker-item[data-value=\"2\"]::before {\n  content: \"标题2\";\n}\n.ql-snow .ql-picker.ql-header .ql-picker-label[data-value=\"3\"]::before,\n.ql-snow .ql-picker.ql-header .ql-picker-item[data-value=\"3\"]::before {\n  content: \"标题3\";\n}\n.ql-snow .ql-picker.ql-header .ql-picker-label[data-value=\"4\"]::before,\n.ql-snow .ql-picker.ql-header .ql-picker-item[data-value=\"4\"]::before {\n  content: \"标题4\";\n}\n.ql-snow .ql-picker.ql-header .ql-picker-label[data-value=\"5\"]::before,\n.ql-snow .ql-picker.ql-header .ql-picker-item[data-value=\"5\"]::before {\n  content: \"标题5\";\n}\n.ql-snow .ql-picker.ql-header .ql-picker-label[data-value=\"6\"]::before,\n.ql-snow .ql-picker.ql-header .ql-picker-item[data-value=\"6\"]::before {\n  content: \"标题6\";\n}\n.ql-snow .ql-picker.ql-font .ql-picker-label::before,\n.ql-snow .ql-picker.ql-font .ql-picker-item::before {\n  content: \"标准字体\";\n}\n.ql-snow .ql-picker.ql-font .ql-picker-label[data-value=\"serif\"]::before,\n.ql-snow .ql-picker.ql-font .ql-picker-item[data-value=\"serif\"]::before {\n  content: \"衬线字体\";\n}\n.ql-snow .ql-picker.ql-font .ql-picker-label[data-value=\"monospace\"]::before,\n.ql-snow .ql-picker.ql-font .ql-picker-item[data-value=\"monospace\"]::before {\n  content: \"等宽字体\";\n}\n</style>\n"],"mappings":"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","ignoreList":[]}]}